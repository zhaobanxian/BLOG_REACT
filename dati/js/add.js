
var dataList = [
];
pushweidu();
function pushweidu() {
    pushweidu1();
    pushweidu2();
    pushweidu3();
    pushweidu4();
    pushweidu5();
}

function pushweidu1() {
    dataList.push({
        weidu: 1,//纬度 行为管理
        qs: [{//答案们。。
            scroe: 6,//分数
            tips: '多在室外活动，多接触熟悉的人或动物',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 15,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 0,
            tips: '多训练或者去训练学校',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 9,
            tips: '牵引出行避免打架',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })

    dataList.push({
        weidu: 1,//纬度
        qs: [{//答案们。。
            scroe: 0,//分数
            tips: '多训练或者去训练学校',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 15,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 6,
            tips: '主人多陪伴，多互动',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 9,
            tips: '主人多陪伴，多互动',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })

    dataList.push({
        weidu: 1,//纬度
        qs: [{//答案们。。
            scroe: 9,//分数
            tips: '多训练或者去训练学校',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 3,
            tips: '增加饲喂量',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '坚决不给他们任何餐桌食物',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 18,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
}
function pushweidu2() {
    dataList.push({
        weidu: 2,//纬度 健康管理
        qs: [{//答案们。。
            scroe: 3,//分数
            tips: '增加营养',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 9,
            tips: '增加营养',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 15,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 3,
            tips: '减肥',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })

    dataList.push({
        weidu: 2,//纬度
        qs: [{//答案们。。
            scroe: 15,//分数
            tips: '摄入不饱和脂肪酸',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 5,
            tips: '定期洗澡',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })

    dataList.push({
        weidu: 2,//纬度
        qs: [{//答案们。。
            scroe: 4,//分数
            tips: '去医院检查身体状况',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 12,
            tips: '去医院检查身体状况',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 20,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 4,
            tips: '去医院检查身体状况',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
}
function pushweidu3() {
    dataList.push({
        weidu: 3,//纬度 健康检测
        qs: [{//答案们。。
            scroe: 4,//分数
            tips: '清理牙结石',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 4,
            tips: '去医院检查口腔',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 12,
            tips: '漱口水饮水',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 20,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 3,//纬度 健康检测
        qs: [{//答案们。。
            scroe: 15,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 9,
            tips: '使用洗液清理耳道',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 6,
            tips: '去医院检查耳道',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 0,
            tips: '去医院检查耳道',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })

    dataList.push({
        weidu: 3,//纬度 健康检测
        qs: [{//答案们。。
            scroe: 15,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 3,
            tips: '去医院检查牙齿',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 12,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
}
function pushweidu4() {
    dataList.push({
        weidu: 4,//纬度 营养护理
        qs: [{//答案们。。
            scroe: 12.5,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 2.5,
            tips: '增加洗澡频率',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 0,
            tips: '增加洗澡频率',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 4,//纬度 营养护理
        qs: [{//答案们。。
            scroe: 10,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 0,
            tips: '添加维生素和不饱和脂肪酸',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 5,
            tips: '提高狗粮的比例',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 4,//纬度 营养护理
        qs: [{//答案们。。
            scroe: 7.5,//分数
            tips: '添加维生素和不饱和脂肪酸',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 7.5,
            tips: '去医院检查毛发',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 4,//纬度 营养护理
        qs: [{//答案们。。
            scroe: 12.5,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 2.5,
            tips: '增减驱虫频率',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 0,
            tips: '定期驱虫',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
}
function pushweidu5() {
    dataList.push({
        weidu: 5,//纬度 疾病问题
        qs: [{//答案们。。
            scroe: 20,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 0,
            tips: '定期免疫',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 5,//纬度 疾病问题
        qs: [{//答案们。。
            scroe: 4,//分数
            tips: '去医院就诊，检查皮肤状况',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 4,
            tips: '有食物过敏症状，需要注意饮食',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 2,
            tips: '驱虫',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 5,//纬度 疾病问题
        qs: [{//答案们。。
            scroe: 5,//分数
            tips: '去医院检查',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {//答案们。。
            scroe: 5,//分数
            tips: '去医院检查',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {//答案们。。
            scroe: 5,//分数
            tips: '去医院检查',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {//答案们。。
            scroe: 5,//分数
            tips: '去医院检查',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {//答案们。。
            scroe: 5,//分数
            tips: '去医院检查',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 5,//纬度 疾病问题
        qs: [{//答案们。。
            scroe: 4,//分数
            tips: '去医院检查',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 2,
            tips: '驱跳骚',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 4,
            tips: '驱虫',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 10,
            tips: '',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
    dataList.push({
        weidu: 5,//纬度 疾病问题
        qs: [{//答案们。。
            scroe: 10,//分数
            tips: '',//解决方案
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 6,
            tips: '去医院检查乳房肿块',
            ischoose: false,//是否选择 true-选择 false-未选择
        }, {
            scroe: 4,
            tips: '马上去医院检查乳房肿块',
            ischoose: false,//是否选择 true-选择 false-未选择
        }]
    })
}

function setId(dtlist) {
    if (typeof dtlist=="object"&&dtlist.length>0) {
        for (var i = 0, j = dtlist.length; i < j; i++) {
            dtlist[i].uuid = i + 1;
        }
    }
}
setId(dataList);
//数据列表还原
function backlist(dtlist) {
    for (var i = 0, j = dtlsit.length; i < j; i++) {
        var tmpitem = dtlist[i];
        for (var ii = 1; ii < tmpitem.qs.length; ii++) {
            if (tmpitem[ii-1]) {
                tmpitem[ii - 1].ischoose = false;
            } else {
                break;
            }
        }
    }
}

function createdom(item) {
    var tmpdiv = document.createElement("div");
    tmpdiv.className = "text-main" + item.uuid + " hide";

    //题目
    var tmpdivfst = document.createElement("div");
    tmpdivfst.className = "question-text";

    var tmpimg = document.createElement("img");
    tmpimg.src = "img/q" + item.uuid + "/qt" + item.uuid + ".png";
    tmpimg.className = 'question-act';
    tmpdivfst.appendChild(tmpimg);
    tmpdiv.appendChild(tmpdivfst);

    //题干
    var tmpul = document.createElement("ul");
    tmpul.className = 'key-menu'+ item.uuid;
    for (var i = 1; i < item.qs.length + 1; i++) {
        var tmpitem = item.qs[i - 1];
        var tmpli = document.createElement("li");
        tmpli.className = "y key key" + i + " key-action" + i;
        $(tmpli).click(answerClick.bind(tmpli, tmpitem));
        tmpul.appendChild(tmpli);
    }

    tmpdiv.appendChild(tmpul);
    return tmpdiv;
}

//获取要加载的图片资源包
function getimglist(dtlist)
{
    var loadpiclist = [];
    for (var i = 0, j = dtlist.length; i < j; i++) {
        var tmpitem = dtlist[i];
        loadpiclist.push("img/q" + tmpitem.uuid + "/qt" + tmpitem.uuid + ".png");
        for (var ii = 1; ii < tmpitem.qs.length; ii++) {
            if (tmpitem.qs[ii-1]) {
                var tagname = "a";
                if (ii == 2) {
                    tagname = "b";
                } else if (ii == 3) {
                    tagname = "c";
                } else if (ii == 4) {
                    tagname = "d";
                } else if (ii == 5) {
                    tagname = "e";
                } else if (ii == 6) {
                    tagname = "f";
                }
                loadpiclist.push("img/q" + ii + "/" + tagname + ".png");
            } else {
                break;
            }
        }
    }
    return loadpiclist;
}


function answerClick(item) {
    if (item.ischoose == true) {
        item.ischoose = false;
    } else {
        item.ischoose = true;
    }
    var html = "";

    if (item.ischoose) {
        html = "<div class='yes-icon'></div>";
        $(this).append(html);
    } else {
        $(this).find('.yes-icon').remove();
    }

    //是否显示下一道题按钮
    window.isshownext = false;
    window.toanswerpage = false;
    if (window.currentindex == dataList.length) {
        //最后一个
        //跳转到结果页
        localStorage.setItem("datilist", JSON.stringify(dataList));
        window.location = "jgtu.html";
    }
    else {
        var tmpitem = dataList[window.currentindex - 1];
        for (var i = 0, j = tmpitem.qs.length; i < j; i++) {
            var tmpqsitem = tmpitem.qs[i];
            if (tmpqsitem.ischoose == true) {
                window.isshownext = true;
            }
        }
    }

    tonextitem();
}

function tonextitem() {
    $('.text-main' + window.currentindex).addClass('hide');
    window.currentindex++;
    $('.text-main' + window.currentindex).removeClass('hide');
}

    var yes = 0;
    var lengths = 1;
    var change = true;
    var music = true;
    function firstMenu() {
        $(".begin-icon").click(function () {
            $(".begin-icon").addClass("left-action");
            $(".text-title").addClass("right-action");
            $(".text-main0").css("background-image", 'url("img/q0/bg2.jpg")');
            //setTimeout(function () {
                $(".key").html("");
                $(".text-main0").addClass("hide");
                $(".text-main1").removeClass("hide");
            //}, 1300);
        })
    }
    function musicIcon() {
        $(".music-icon").click(function () {
            console.log("micclick")
            if (music == true) {
                $(this).css("background-image", ' url("img/micon2.png")');
                music = false;
                document.getElementById('music').pause(); return false;
            } else if (music == false) {
                $(this).css("background-image", ' url("img/micon1.png")');
                music = true;
                document.getElementById('music').play(); return false;
            }
        })
    }
    function lastIcon() {
        $(".study-icon,.study-icon").click(function () {
            clickMore();
        });
        $(".icon2").click(function () {
            yes = 0;
            lengths = 1;
            $(".music-icon").removeClass("hide");
            $(".music-icon").css("background-image", ' url("img/micon1.png")');
            $(".text-main11").addClass("hide");
            $(".text-main0").removeClass("hide");
            $(".text-title").addClass("first-action");
            $(".begin-icon").addClass("first-action");
            $(".text-title").removeClass("right-action");
            $(".begin-icon").removeClass("left-action");
            $(".text-main0").css("background-image", 'url("img/q0/bg1.jpg")');
            document.getElementById('music').play();
            window._hmt && window._hmt.push(['_trackEvent', '语文100重来', 'click']);
            return false;
        });
        $(".icon1").click(function () {
            dp_share();
        });
        $(".share-menu").click(function () {
            dp_share();
        })
    }
    /**
     * 答题
     */
    //function setTime(item) {
    //    $(".texts").addClass("hide");
    //    //$('.text-main' + lengths + '').addClass("hide");
    //    lengths++;
    //    //$('.text-main' + lengths + '').removeClass("hide");
    //    change = true;
    //}
    
    firstMenu();
    //lastIcon();
    musicIcon();
    /**
     * 预加载
     * @type {Load}
     */
    var load = new Load(function (p) {
        var text = $("#load .text");
        text.html(parseInt(p * 100) + "%");
        if ($(".text").text() == "100%") {
            $("#load").addClass("hide");
            $(".text-main0").removeClass("hide");
            $(".music-icon").removeClass("hide");
            document.getElementById('music').play();
            localStorage.setItem("chongxindati", "100");
            return false;
        }
    }, loadComplete, getimglist(dataList), 36);
    score = 0;
    changing = true;

    var indexs = 0;

    $(function () {
        if (!window.currentindex)
            window.currentindex = 1;
        
        var ct = document.getElementById("content");
        for (var i = 0, j = dataList.length; i < j; i++) {
            var tmpitem = dataList[i];
            ct.appendChild(createdom(tmpitem))
        }

        var dttag = localStorage.getItem("chongxindati");
        if (dttag == "100") {
            $("#load").addClass("hide");
            $(".text-main0").removeClass("hide");
            $(".music-icon").removeClass("hide");
            document.getElementById('music').play();
        }
        else {
            load.Start();
        }
    });

    var UA = function () {
        var userAgent = navigator.userAgent.toLowerCase();
        return {
            ipad: (/ipad/i).test(userAgent),
            iphone: (/iphone/i).test(userAgent),
            android: (/android/i).test(userAgent),
            weixin: (/micromessenger/i).test(userAgent)
        };
    };
    var ua = UA();
    if (ua.weixin || ua.android || ua.ipad || ua.iphone) {
        $(".qr1").addClass("hide");
        $(".qr2").addClass("hide");
    }

    function loadComplete() { }